\hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine}{}\doxysection{BARE2D\+::Lua\+Script\+Engine Class Reference}
\label{class_b_a_r_e2_d_1_1_lua_script_engine}\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}


{\ttfamily \#include $<$Lua\+Script\+Engine.\+hpp$>$}



Collaboration diagram for BARE2D\+::Lua\+Script\+Engine\+:
% FIG 0
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_aa8ed4ea17af538a41e8d4fec0727f852}{Lua\+Script\+Engine}} ()
\item 
\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_a6f0bef2c7ef75d6d28e76403ff8d06c4}{$\sim$\+Lua\+Script\+Engine}} ()
\item 
void \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_afc202ede3bcd76cf0d38a5cfa6da2e86}{init}} (std\+::string lua\+Modules\+Path)
\begin{DoxyCompactList}\small\item\em Initializes the \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine}{Lua\+Script\+Engine}} -\/ loads basic modules etc. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_ae9539fd6e864b66bcb00299f24f0c8bc}{register\+Module}} (std\+::string filename)
\begin{DoxyCompactList}\small\item\em Loads and registers (read\+: runs) the module located at the given file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_ae207fae3de0b49158c4eeede0e41b070}{register\+CFunction}} (lua\+\_\+\+CFunction function, std\+::string name)
\begin{DoxyCompactList}\small\item\em Adds a Lua C Function. This is a function which can be called from inside a Lua script, and executes C/\+C++ code. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_a428a4f2b3f87f8b90db2880a67ffee31}{update}} ()
\begin{DoxyCompactList}\small\item\em Processes all scripts from the \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_queue}{Lua\+Script\+Queue}} and updates all running scripts. That\textquotesingle{}s pretty much it! \end{DoxyCompactList}\item 
lua\+\_\+\+State $\ast$ \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_a3f35a7b4086aa2c2587c133edd0d05c2}{get\+Master\+State}} ()
\begin{DoxyCompactList}\small\item\em Returns a pointer to the master state. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$class T $>$ }\\static void \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_abc198447d0b9b0f8bdaf46be9f17a368}{add\+Value\+To\+Registry}} (lua\+\_\+\+State $\ast$L, T $\ast$value, std\+::string key)
\begin{DoxyCompactList}\small\item\em Adds a value to the Lua registry -\/ this lets any C/\+C++ code use the value stored in the state (it is stored in the state) \end{DoxyCompactList}\item 
{\footnotesize template$<$class T $>$ }\\static T $\ast$ \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_a45ecc0f8bd377837728c22f1dca3a1a5}{get\+Value\+From\+Registry}} (lua\+\_\+\+State $\ast$L, std\+::string key)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_context_wrapper}{Lua\+Script\+Context\+Wrapper}} $\ast$ \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_a81e4604bf36c490f713d00cd68d4a874}{create\+Lua\+Context}} (\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{Lua\+Script}} $\ast$script)
\begin{DoxyCompactList}\small\item\em Creates a \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_context_wrapper}{Lua\+Script\+Context\+Wrapper}} using the data from script. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
lua\+\_\+\+State $\ast$ \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine_adb96773e404afca7b5a77a98bda110d8}{m\+\_\+master\+State}} = nullptr
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line \mbox{\hyperlink{_lua_script_engine_8hpp_source_l00020}{20}} of file \mbox{\hyperlink{_lua_script_engine_8hpp_source}{Lua\+Script\+Engine.\+hpp}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_aa8ed4ea17af538a41e8d4fec0727f852}\label{class_b_a_r_e2_d_1_1_lua_script_engine_aa8ed4ea17af538a41e8d4fec0727f852}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!LuaScriptEngine@{LuaScriptEngine}}
\index{LuaScriptEngine@{LuaScriptEngine}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{LuaScriptEngine()}{LuaScriptEngine()}}
{\footnotesize\ttfamily BARE2\+D\+::\+Lua\+Script\+Engine\+::\+Lua\+Script\+Engine (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00012}{12}} of file \mbox{\hyperlink{_lua_script_engine_8cpp_source}{Lua\+Script\+Engine.\+cpp}}.

\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_a6f0bef2c7ef75d6d28e76403ff8d06c4}\label{class_b_a_r_e2_d_1_1_lua_script_engine_a6f0bef2c7ef75d6d28e76403ff8d06c4}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!````~LuaScriptEngine@{$\sim$LuaScriptEngine}}
\index{````~LuaScriptEngine@{$\sim$LuaScriptEngine}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{$\sim$LuaScriptEngine()}{~LuaScriptEngine()}}
{\footnotesize\ttfamily BARE2\+D\+::\+Lua\+Script\+Engine\+::$\sim$\+Lua\+Script\+Engine (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00016}{16}} of file \mbox{\hyperlink{_lua_script_engine_8cpp_source}{Lua\+Script\+Engine.\+cpp}}.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_abc198447d0b9b0f8bdaf46be9f17a368}\label{class_b_a_r_e2_d_1_1_lua_script_engine_abc198447d0b9b0f8bdaf46be9f17a368}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!addValueToRegistry@{addValueToRegistry}}
\index{addValueToRegistry@{addValueToRegistry}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{addValueToRegistry()}{addValueToRegistry()}}
{\footnotesize\ttfamily template$<$class T $>$ \\
static void BARE2\+D\+::\+Lua\+Script\+Engine\+::add\+Value\+To\+Registry (\begin{DoxyParamCaption}\item[{lua\+\_\+\+State $\ast$}]{L,  }\item[{T $\ast$}]{value,  }\item[{std\+::string}]{key }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Adds a value to the Lua registry -\/ this lets any C/\+C++ code use the value stored in the state (it is stored in the state) 


\begin{DoxyParams}{Parameters}
{\em value} & A pointer to the value to be added. \\
\hline
{\em key} & The key to be used to access the value in the registry. \\
\hline
\end{DoxyParams}
\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_a81e4604bf36c490f713d00cd68d4a874}\label{class_b_a_r_e2_d_1_1_lua_script_engine_a81e4604bf36c490f713d00cd68d4a874}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!createLuaContext@{createLuaContext}}
\index{createLuaContext@{createLuaContext}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{createLuaContext()}{createLuaContext()}}
{\footnotesize\ttfamily \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_context_wrapper}{Lua\+Script\+Context\+Wrapper}} $\ast$ BARE2\+D\+::\+Lua\+Script\+Engine\+::create\+Lua\+Context (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{Lua\+Script}} $\ast$}]{script }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Creates a \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_context_wrapper}{Lua\+Script\+Context\+Wrapper}} using the data from script. 


\begin{DoxyParams}{Parameters}
{\em script} & A pointer to the \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{Lua\+Script}} which we want to create a new Lua state for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A pointer to the \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_context_wrapper}{Lua\+Script\+Context\+Wrapper}} which the function created. 
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00082}{82}} of file \mbox{\hyperlink{_lua_script_engine_8cpp_source}{Lua\+Script\+Engine.\+cpp}}.



References \mbox{\hyperlink{_lua_script_8cpp_source_l00021}{BARE2\+D\+::\+Lua\+Script\+Context\+Wrapper\+::init()}}, and \mbox{\hyperlink{_lua_script_engine_8hpp_source_l00077}{m\+\_\+master\+State}}.



Referenced by \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00061}{update()}}.

Here is the call graph for this function\+:
% FIG 1
Here is the caller graph for this function\+:
% FIG 2
\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_a3f35a7b4086aa2c2587c133edd0d05c2}\label{class_b_a_r_e2_d_1_1_lua_script_engine_a3f35a7b4086aa2c2587c133edd0d05c2}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!getMasterState@{getMasterState}}
\index{getMasterState@{getMasterState}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{getMasterState()}{getMasterState()}}
{\footnotesize\ttfamily lua\+\_\+\+State $\ast$ BARE2\+D\+::\+Lua\+Script\+Engine\+::get\+Master\+State (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Returns a pointer to the master state. 



Definition at line \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00092}{92}} of file \mbox{\hyperlink{_lua_script_engine_8cpp_source}{Lua\+Script\+Engine.\+cpp}}.



References \mbox{\hyperlink{_lua_script_engine_8hpp_source_l00077}{m\+\_\+master\+State}}.

\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_a45ecc0f8bd377837728c22f1dca3a1a5}\label{class_b_a_r_e2_d_1_1_lua_script_engine_a45ecc0f8bd377837728c22f1dca3a1a5}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!getValueFromRegistry@{getValueFromRegistry}}
\index{getValueFromRegistry@{getValueFromRegistry}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{getValueFromRegistry()}{getValueFromRegistry()}}
{\footnotesize\ttfamily template$<$class T $>$ \\
static T $\ast$ BARE2\+D\+::\+Lua\+Script\+Engine\+::get\+Value\+From\+Registry (\begin{DoxyParamCaption}\item[{lua\+\_\+\+State $\ast$}]{L,  }\item[{std\+::string}]{key }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_afc202ede3bcd76cf0d38a5cfa6da2e86}\label{class_b_a_r_e2_d_1_1_lua_script_engine_afc202ede3bcd76cf0d38a5cfa6da2e86}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!init@{init}}
\index{init@{init}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void BARE2\+D\+::\+Lua\+Script\+Engine\+::init (\begin{DoxyParamCaption}\item[{std\+::string}]{lua\+Modules\+Path }\end{DoxyParamCaption})}



Initializes the \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_engine}{Lua\+Script\+Engine}} -\/ loads basic modules etc. 


\begin{DoxyParams}{Parameters}
{\em The} & path to the user-\/created Lua modules. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00021}{21}} of file \mbox{\hyperlink{_lua_script_engine_8cpp_source}{Lua\+Script\+Engine.\+cpp}}.



References \mbox{\hyperlink{_lua_functions_8cpp_source_l00009}{BARE2\+D\+::\+Lua\+Functions\+::delay()}}, \mbox{\hyperlink{_lua_script_engine_8hpp_source_l00077}{m\+\_\+master\+State}}, \mbox{\hyperlink{_lua_functions_8cpp_source_l00016}{BARE2\+D\+::\+Lua\+Functions\+::print()}}, and \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00050}{register\+CFunction()}}.

Here is the call graph for this function\+:
% FIG 3
\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_ae207fae3de0b49158c4eeede0e41b070}\label{class_b_a_r_e2_d_1_1_lua_script_engine_ae207fae3de0b49158c4eeede0e41b070}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!registerCFunction@{registerCFunction}}
\index{registerCFunction@{registerCFunction}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{registerCFunction()}{registerCFunction()}}
{\footnotesize\ttfamily void BARE2\+D\+::\+Lua\+Script\+Engine\+::register\+CFunction (\begin{DoxyParamCaption}\item[{lua\+\_\+\+CFunction}]{function,  }\item[{std\+::string}]{name }\end{DoxyParamCaption})}



Adds a Lua C Function. This is a function which can be called from inside a Lua script, and executes C/\+C++ code. 


\begin{DoxyParams}{Parameters}
{\em function} & The function which will be called when the Lua script calls the closure. Follows the form of a std\+::function$<$int(lua\+\_\+\+State$\ast$)$>$. The lua\+\_\+\+State pointer provides a handle to the Lua stack (really, the whole state, but the stack is the most important) which allows the C/\+C++ program to recieve parameters and add return values. Must return the number of values the function gives back to Lua. See \href{https://www.lua.org/manual/5.1/manual.html\#lua_CFunction}{\texttt{ https\+://www.\+lua.\+org/manual/5.\+1/manual.\+html\#lua\+\_\+\+CFunction}} \\
\hline
{\em name} & The name by which the Lua code can call the function. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00050}{50}} of file \mbox{\hyperlink{_lua_script_engine_8cpp_source}{Lua\+Script\+Engine.\+cpp}}.



References \mbox{\hyperlink{_lua_script_engine_8hpp_source_l00077}{m\+\_\+master\+State}}.



Referenced by \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00021}{init()}}.

Here is the caller graph for this function\+:
% FIG 4
\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_ae9539fd6e864b66bcb00299f24f0c8bc}\label{class_b_a_r_e2_d_1_1_lua_script_engine_ae9539fd6e864b66bcb00299f24f0c8bc}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!registerModule@{registerModule}}
\index{registerModule@{registerModule}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{registerModule()}{registerModule()}}
{\footnotesize\ttfamily void BARE2\+D\+::\+Lua\+Script\+Engine\+::register\+Module (\begin{DoxyParamCaption}\item[{std\+::string}]{filename }\end{DoxyParamCaption})}



Loads and registers (read\+: runs) the module located at the given file. 


\begin{DoxyParams}{Parameters}
{\em filename} & The file to load/run. \\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00045}{45}} of file \mbox{\hyperlink{_lua_script_engine_8cpp_source}{Lua\+Script\+Engine.\+cpp}}.



References \mbox{\hyperlink{_b_a_r_e_errors_8cpp_source_l00190}{BARE2\+D\+::throw\+Error()}}, and \mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15abcb313a5c9f8965d7b75833af33d16be}{BARE2\+D\+::\+UNINITIALIZED\+\_\+\+FUNCTION}}.

Here is the call graph for this function\+:
% FIG 5
\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_a428a4f2b3f87f8b90db2880a67ffee31}\label{class_b_a_r_e2_d_1_1_lua_script_engine_a428a4f2b3f87f8b90db2880a67ffee31}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!update@{update}}
\index{update@{update}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{update()}{update()}}
{\footnotesize\ttfamily void BARE2\+D\+::\+Lua\+Script\+Engine\+::update (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Processes all scripts from the \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_queue}{Lua\+Script\+Queue}} and updates all running scripts. That\textquotesingle{}s pretty much it! 



Definition at line \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00061}{61}} of file \mbox{\hyperlink{_lua_script_engine_8cpp_source}{Lua\+Script\+Engine.\+cpp}}.



References \mbox{\hyperlink{_lua_context_manager_8cpp_source_l00054}{BARE2\+D\+::\+Lua\+Context\+Manager\+::add\+Context()}}, \mbox{\hyperlink{_lua_script_queue_8cpp_source_l00056}{BARE2\+D\+::\+Lua\+Script\+Queue\+::clear\+Queue()}}, \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00082}{create\+Lua\+Context()}}, \mbox{\hyperlink{_lua_context_manager_8cpp_source_l00021}{BARE2\+D\+::\+Lua\+Context\+Manager\+::get\+Instance()}}, \mbox{\hyperlink{_lua_script_queue_8cpp_source_l00019}{BARE2\+D\+::\+Lua\+Script\+Queue\+::get\+Instance()}}, \mbox{\hyperlink{_lua_script_8cpp_source_l00056}{BARE2\+D\+::\+Lua\+Script\+Context\+Wrapper\+::start()}}, and \mbox{\hyperlink{_lua_context_manager_8cpp_source_l00033}{BARE2\+D\+::\+Lua\+Context\+Manager\+::update()}}.

Here is the call graph for this function\+:
% FIG 6


\doxysubsection{Field Documentation}
\mbox{\Hypertarget{class_b_a_r_e2_d_1_1_lua_script_engine_adb96773e404afca7b5a77a98bda110d8}\label{class_b_a_r_e2_d_1_1_lua_script_engine_adb96773e404afca7b5a77a98bda110d8}} 
\index{BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}!m\_masterState@{m\_masterState}}
\index{m\_masterState@{m\_masterState}!BARE2D::LuaScriptEngine@{BARE2D::LuaScriptEngine}}
\doxysubsubsection{\texorpdfstring{m\_masterState}{m\_masterState}}
{\footnotesize\ttfamily lua\+\_\+\+State$\ast$ BARE2\+D\+::\+Lua\+Script\+Engine\+::m\+\_\+master\+State = nullptr\hspace{0.3cm}{\ttfamily [private]}}



Definition at line \mbox{\hyperlink{_lua_script_engine_8hpp_source_l00077}{77}} of file \mbox{\hyperlink{_lua_script_engine_8hpp_source}{Lua\+Script\+Engine.\+hpp}}.



Referenced by \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00082}{create\+Lua\+Context()}}, \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00092}{get\+Master\+State()}}, \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00021}{init()}}, and \mbox{\hyperlink{_lua_script_engine_8cpp_source_l00050}{register\+CFunction()}}.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Source/\mbox{\hyperlink{_lua_script_engine_8hpp}{Lua\+Script\+Engine.\+hpp}}\item 
Source/\mbox{\hyperlink{_lua_script_engine_8cpp}{Lua\+Script\+Engine.\+cpp}}\end{DoxyCompactItemize}
