\hypertarget{_resource_manager_8cpp_source}{}\doxysection{Resource\+Manager.\+cpp}
\label{_resource_manager_8cpp_source}\index{Source/ResourceManager.cpp@{Source/ResourceManager.cpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \mbox{\hyperlink{_resource_manager_8hpp}{"ResourceManager.hpp"}}}
\DoxyCodeLine{00002 }
\DoxyCodeLine{00003 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{string}\textcolor{preprocessor}{>}}
\DoxyCodeLine{00004 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \textcolor{preprocessor}{<}\textcolor{preprocessor}{vector}\textcolor{preprocessor}{>}}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \mbox{\hyperlink{_b_a_r_e_errors_8hpp}{"BAREErrors.hpp"}}}
\DoxyCodeLine{00007 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \mbox{\hyperlink{_g_l_context_manager_8hpp}{"GLContextManager.hpp"}}}
\DoxyCodeLine{00008 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \mbox{\hyperlink{_i_o_manager_8hpp}{"IOManager.hpp"}}}
\DoxyCodeLine{00009 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \mbox{\hyperlink{_pico_p_n_g_8hpp}{"PicoPNG.hpp"}}}
\DoxyCodeLine{00010 }
\DoxyCodeLine{00011 \textcolor{keyword}{namespace} BARE2D \{}
\DoxyCodeLine{00012 }
\DoxyCodeLine{00013 std::string ResourceManager::m\_assetsPathPrefix = \textcolor{stringliteral}{""};}
\DoxyCodeLine{00014 std::string ResourceManager::m\_texturePathPrefix = \textcolor{stringliteral}{""};}
\DoxyCodeLine{00015 Cache<std::string, Texture>* ResourceManager::m\_textures = \textcolor{keyword}{new} Cache<std::string, Texture>();}
\DoxyCodeLine{00016 Cache<std::string, MutableTexture>* ResourceManager::m\_mutableTextures = \textcolor{keyword}{new} Cache<std::string, MutableTexture>();}
\DoxyCodeLine{00017 Cache<std::string, Sound>* ResourceManager::m\_sounds = \textcolor{keyword}{new} Cache<std::string, Sound>();}
\DoxyCodeLine{00018 Cache<std::string, Music>* ResourceManager::m\_music = \textcolor{keyword}{new} Cache<std::string, Music>();}
\DoxyCodeLine{00019 Cache<std::string, LuaScript>* ResourceManager::m\_scripts = \textcolor{keyword}{new} Cache<std::string, LuaScript>();}
\DoxyCodeLine{00020 Cache<std::string, Font>* ResourceManager::m\_fonts = \textcolor{keyword}{new} Cache<std::string, Font>();}
\DoxyCodeLine{00021 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00022}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a00ef658172786a81106218cc6035bc13}{00022}} ShaderProgram ResourceManager::loadShaders(std::string\& vertShaderSource, std::string\& fragShaderSource)}
\DoxyCodeLine{00023 \{}
\DoxyCodeLine{00024     ShaderProgram newProgram;}
\DoxyCodeLine{00025 }
\DoxyCodeLine{00026     newProgram.compileShaders((m\_assetsPathPrefix + vertShaderSource).c\_str(),}
\DoxyCodeLine{00027                               (m\_assetsPathPrefix + fragShaderSource).c\_str());}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029     \textcolor{keywordflow}{return} newProgram;}
\DoxyCodeLine{00030 \}}
\DoxyCodeLine{00031 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00032}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a5dbae5c36f78ce4feb0ec3c0b8d1728a}{00032}} ShaderProgram ResourceManager::loadShadersFromSource(std::string\& vertShaderSource, std::string\& fragShaderSource)}
\DoxyCodeLine{00033 \{}
\DoxyCodeLine{00034     ShaderProgram newProgram;}
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036     newProgram.compileShadersFromSource(vertShaderSource.c\_str(), fragShaderSource.c\_str());}
\DoxyCodeLine{00037 }
\DoxyCodeLine{00038     \textcolor{keywordflow}{return} newProgram;}
\DoxyCodeLine{00039 \}}
\DoxyCodeLine{00040 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00041}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af4bb03a60f5fdb3ec94064e17c84e823}{00041}} Texture ResourceManager::loadTexture(std::string\& texturePath)}
\DoxyCodeLine{00042 \{}
\DoxyCodeLine{00043     std::string fullPath = m\_assetsPathPrefix + m\_texturePathPrefix + texturePath;}
\DoxyCodeLine{00044 }
\DoxyCodeLine{00045     \{}
\DoxyCodeLine{00046     \textcolor{comment}{// First, check that it doesn't already exist.}}
\DoxyCodeLine{00047     Texture* cached = m\_textures-\/>findItem(fullPath);}
\DoxyCodeLine{00048 }
\DoxyCodeLine{00049     \textcolor{keywordflow}{if}(cached)}
\DoxyCodeLine{00050         \textcolor{keywordflow}{return} *cached;}
\DoxyCodeLine{00051     \}}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053     \textcolor{comment}{// So, it's not in the cache if we're still here. Load it from a file, create it in the cache, and add it.}}
\DoxyCodeLine{00054     \textcolor{comment}{// Creates it in the cache and returns a pointer.}}
\DoxyCodeLine{00055     Texture* loadedTex = m\_textures-\/>createItem(fullPath);}
\DoxyCodeLine{00056     loadedTex-\/>filepath = fullPath;}
\DoxyCodeLine{00057     \{}
\DoxyCodeLine{00058     \textcolor{comment}{// Load raw data from the file}}
\DoxyCodeLine{00059     std::vector<\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}> fileData;}
\DoxyCodeLine{00060     \textcolor{keywordtype}{bool} good = IOManager::readFileToBuffer(fullPath, fileData);}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062     \textcolor{comment}{// Check for errors}}
\DoxyCodeLine{00063     \textcolor{keywordflow}{if}(!good)}
\DoxyCodeLine{00064         \{}
\DoxyCodeLine{00065         throwFatalError(BAREError::TEXTURE\_FAILURE);}
\DoxyCodeLine{00066         \textcolor{keywordflow}{return} *loadedTex;}
\DoxyCodeLine{00067     \}}
\DoxyCodeLine{00068 }
\DoxyCodeLine{00069     \textcolor{comment}{// Decode the raw information into texture data (thanks PicoPNG!)}}
\DoxyCodeLine{00070     std::vector<\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}> textureData;}
\DoxyCodeLine{00071     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long} width, height;}
\DoxyCodeLine{00072     \textcolor{keywordtype}{int} errCode = decodePNG(textureData, width, height, \&(fileData[0]), fileData.size());}
\DoxyCodeLine{00073     loadedTex-\/>width = width;}
\DoxyCodeLine{00074     loadedTex-\/>height = height;}
\DoxyCodeLine{00075 }
\DoxyCodeLine{00076     \textcolor{comment}{// Check if pico broke}}
\DoxyCodeLine{00077     \textcolor{keywordflow}{if}(errCode != 0)}
\DoxyCodeLine{00078         \{}
\DoxyCodeLine{00079         throwFatalError(BAREError::TEXTURE\_FAILURE);}
\DoxyCodeLine{00080         \textcolor{keywordflow}{return} *loadedTex;}
\DoxyCodeLine{00081     \}}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083     \textcolor{comment}{// Our data is good, so actually generate the texture, etc.}}
\DoxyCodeLine{00084     glGenTextures((GLsizei)1, \&(loadedTex-\/>id));}
\DoxyCodeLine{00085 }
\DoxyCodeLine{00086     \textcolor{comment}{// Bind the texture object}}
\DoxyCodeLine{00087     GLContextManager::getContext()-\/>bindTexture(GL\_TEXTURE\_2D, loadedTex-\/>id);}
\DoxyCodeLine{00088 }
\DoxyCodeLine{00089     \textcolor{comment}{// Upload pixel data}}
\DoxyCodeLine{00090     glTexImage2D(GL\_TEXTURE\_2D, (GLint)0, GL\_RGBA, (GLsizei)loadedTex-\/>width, (GLsizei)loadedTex-\/>height, (GLint)0,}
\DoxyCodeLine{00091                  GL\_RGBA, GL\_UNSIGNED\_BYTE, \&(textureData[0]));}
\DoxyCodeLine{00092 }
\DoxyCodeLine{00093     \textcolor{comment}{// Set some basic parameters}}
\DoxyCodeLine{00094     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_S, GL\_CLAMP\_TO\_BORDER);}
\DoxyCodeLine{00095     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_T, GL\_CLAMP\_TO\_BORDER);}
\DoxyCodeLine{00096     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MAG\_FILTER, GL\_NEAREST);}
\DoxyCodeLine{00097     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MIN\_FILTER, GL\_NEAREST\_MIPMAP\_LINEAR);}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099     \textcolor{comment}{// Generate mipmaps}}
\DoxyCodeLine{00100     glGenerateTextureMipmap(loadedTex-\/>id);}
\DoxyCodeLine{00101 }
\DoxyCodeLine{00102     \textcolor{comment}{// Finally, unbind the texture.}}
\DoxyCodeLine{00103     GLContextManager::getContext()-\/>bindTexture(GL\_TEXTURE\_2D, 0);}
\DoxyCodeLine{00104     \}}
\DoxyCodeLine{00105 }
\DoxyCodeLine{00106     \textcolor{comment}{// Now that we know our texture definitely exists, we just return an instance of it!}}
\DoxyCodeLine{00107     \textcolor{keywordflow}{return} *loadedTex;}
\DoxyCodeLine{00108 \}}
\DoxyCodeLine{00109 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00110}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a05a7123519dfb03fa23088785eb4ece4}{00110}} MutableTexture* ResourceManager::createMutableTexture(std::string\& textureName,}
\DoxyCodeLine{00111                                                       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} width,}
\DoxyCodeLine{00112                                                       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} height,}
\DoxyCodeLine{00113                                                       GLenum minMagFilter \textcolor{comment}{/* = GL\_LINEAR*/},}
\DoxyCodeLine{00114                                                       \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} channels \textcolor{comment}{/* = 4*/},}
\DoxyCodeLine{00115                                                       GLenum format \textcolor{comment}{/* = GL\_RGBA*/})}
\DoxyCodeLine{00116 \{}
\DoxyCodeLine{00117     \textcolor{comment}{// First, check if there's already a texture by this name:}}
\DoxyCodeLine{00118     MutableTexture* tex = loadMutableTexture(textureName);}
\DoxyCodeLine{00119 }
\DoxyCodeLine{00120     \textcolor{comment}{// If we don't already have one generated, we need to do so:}}
\DoxyCodeLine{00121     \textcolor{keywordflow}{if}(!tex)}
\DoxyCodeLine{00122     \{}
\DoxyCodeLine{00123         tex = m\_mutableTextures-\/>createItem(textureName);}
\DoxyCodeLine{00124         glGenTextures(1, \&(tex-\/>id));}
\DoxyCodeLine{00125     \}}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127     \textcolor{comment}{// Now that we have a texture, we need to set some parameters}}
\DoxyCodeLine{00128     \textcolor{comment}{// First, BARE parameters.}}
\DoxyCodeLine{00129     tex-\/>width = width;}
\DoxyCodeLine{00130     tex-\/>height = height;}
\DoxyCodeLine{00131     tex-\/>filepath = textureName;}
\DoxyCodeLine{00132     tex-\/>channels = channels;}
\DoxyCodeLine{00133     tex-\/>format = format;}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135     \textcolor{comment}{// Now for OpenGL parameters.}}
\DoxyCodeLine{00136     GLContextManager::getContext()-\/>bindTexture(GL\_TEXTURE\_2D, tex-\/>id);}
\DoxyCodeLine{00137 }
\DoxyCodeLine{00138     \textcolor{comment}{// Specify it as a texture}}
\DoxyCodeLine{00139     glTexImage2D(GL\_TEXTURE\_2D, 0, format, width, height, 0, format, GL\_UNSIGNED\_BYTE, \textcolor{keywordtype}{nullptr});}
\DoxyCodeLine{00140 }
\DoxyCodeLine{00141     \textcolor{comment}{// Will never want wrapping hopefully.}}
\DoxyCodeLine{00142     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_S, GL\_CLAMP\_TO\_EDGE);}
\DoxyCodeLine{00143     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_T, GL\_CLAMP\_TO\_EDGE);}
\DoxyCodeLine{00144 }
\DoxyCodeLine{00145     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MAG\_FILTER, minMagFilter);}
\DoxyCodeLine{00146     glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MIN\_FILTER, minMagFilter);}
\DoxyCodeLine{00147 }
\DoxyCodeLine{00148     GLContextManager::getContext()-\/>bindTexture(GL\_TEXTURE\_2D, 0);}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150     \textcolor{keywordflow}{return} tex;}
\DoxyCodeLine{00151 \}}
\DoxyCodeLine{00152 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00153}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a9cc8ee112230160452a17bebd7d7b096}{00153}} MutableTexture* ResourceManager::loadMutableTexture(std::string\& textureName)}
\DoxyCodeLine{00154 \{}
\DoxyCodeLine{00155     \textcolor{comment}{// Find it in the cache. If none exists, return nullptr, not a new one.}}
\DoxyCodeLine{00156     MutableTexture* tex = m\_mutableTextures-\/>findItem(textureName);}
\DoxyCodeLine{00157 }
\DoxyCodeLine{00158     \textcolor{keywordflow}{return} tex;}
\DoxyCodeLine{00159 \}}
\DoxyCodeLine{00160 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00161}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ad6a90b54eb05009c05cdfd3794e69855}{00161}} Sound ResourceManager::loadSound(std::string\& soundPath)}
\DoxyCodeLine{00162 \{}
\DoxyCodeLine{00163     std::string fullPath = m\_assetsPathPrefix + soundPath;}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165     Sound* searched = m\_sounds-\/>findItem(fullPath);}
\DoxyCodeLine{00166     \textcolor{keywordflow}{if}(searched)}
\DoxyCodeLine{00167     \{}
\DoxyCodeLine{00168         \textcolor{keywordflow}{return} *searched; \textcolor{comment}{// We've already got it in the cache}}
\DoxyCodeLine{00169     \}}
\DoxyCodeLine{00170 }
\DoxyCodeLine{00171     \textcolor{comment}{// Cache doesn't have it. Load it.}}
\DoxyCodeLine{00172     Mix\_Chunk* chunk = Mix\_LoadWAV(fullPath.c\_str());}
\DoxyCodeLine{00173     \textcolor{keywordflow}{if}(!chunk)}
\DoxyCodeLine{00174     \{}
\DoxyCodeLine{00175         \textcolor{comment}{// There's been an error!}}
\DoxyCodeLine{00176         throwFatalError(BAREError::SDL\_MIXER\_LOAD\_FAILURE, \textcolor{stringliteral}{"Failed to load sound: "} + std::string(Mix\_GetError()));}
\DoxyCodeLine{00177     \}}
\DoxyCodeLine{00178 }
\DoxyCodeLine{00179     \textcolor{comment}{// Create a new one in the cache.}}
\DoxyCodeLine{00180     Sound* created = m\_sounds-\/>createItem(fullPath);}
\DoxyCodeLine{00181     created-\/>chunk = chunk;}
\DoxyCodeLine{00182 }
\DoxyCodeLine{00183     \textcolor{keywordflow}{return} *created;}
\DoxyCodeLine{00184 \}}
\DoxyCodeLine{00185 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00186}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a5d3afd3f5800a9a502a2a1e5311a513a}{00186}} Music ResourceManager::loadMusic(std::string\& musicPath)}
\DoxyCodeLine{00187 \{}
\DoxyCodeLine{00188     std::string fullPath = m\_assetsPathPrefix + musicPath;}
\DoxyCodeLine{00189 }
\DoxyCodeLine{00190     Music* searched = m\_music-\/>findItem(fullPath);}
\DoxyCodeLine{00191     \textcolor{keywordflow}{if}(searched)}
\DoxyCodeLine{00192     \{}
\DoxyCodeLine{00193         \textcolor{keywordflow}{return} *searched; \textcolor{comment}{// We've already got it in the cache}}
\DoxyCodeLine{00194     \}}
\DoxyCodeLine{00195 }
\DoxyCodeLine{00196     \textcolor{comment}{// Cache doesn't have it. Load it.}}
\DoxyCodeLine{00197     Mix\_Music* musicChunk = Mix\_LoadMUS(fullPath.c\_str());}
\DoxyCodeLine{00198     \textcolor{keywordflow}{if}(!musicChunk)}
\DoxyCodeLine{00199     \{}
\DoxyCodeLine{00200         \textcolor{comment}{// There's been an error!}}
\DoxyCodeLine{00201         throwFatalError(BAREError::SDL\_MIXER\_LOAD\_FAILURE, \textcolor{stringliteral}{"Failed to load music: "} + std::string(Mix\_GetError()));}
\DoxyCodeLine{00202     \}}
\DoxyCodeLine{00203 }
\DoxyCodeLine{00204     \textcolor{comment}{// Create a new one in the cache.}}
\DoxyCodeLine{00205     Music* created = m\_music-\/>createItem(fullPath);}
\DoxyCodeLine{00206     created-\/>music = musicChunk;}
\DoxyCodeLine{00207 }
\DoxyCodeLine{00208     \textcolor{keywordflow}{return} *created;}
\DoxyCodeLine{00209 \}}
\DoxyCodeLine{00210 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00211}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aa40f3016ed65df8b01ce2608349ee61b}{00211}} LuaScript ResourceManager::loadScript(std::string\& scriptPath)}
\DoxyCodeLine{00212 \{}
\DoxyCodeLine{00213     \textcolor{keywordflow}{if}(scriptPath == \textcolor{stringliteral}{""})}
\DoxyCodeLine{00214     \textcolor{keywordflow}{return} LuaScript();}
\DoxyCodeLine{00215 }
\DoxyCodeLine{00216     std::string fullPath = m\_assetsPathPrefix + scriptPath;}
\DoxyCodeLine{00217 }
\DoxyCodeLine{00218     \textcolor{comment}{// Make sure we don't already have it loaded}}
\DoxyCodeLine{00219     LuaScript* searched = m\_scripts-\/>findItem(fullPath);}
\DoxyCodeLine{00220     \textcolor{keywordflow}{if}(searched)}
\DoxyCodeLine{00221     \{}
\DoxyCodeLine{00222         \textcolor{keywordflow}{return} *searched;}
\DoxyCodeLine{00223     \}}
\DoxyCodeLine{00224 }
\DoxyCodeLine{00225     \textcolor{comment}{// Just needs to load text from a script file and put it into a LuaScript object, then put that into the cache.}}
\DoxyCodeLine{00226     \textcolor{comment}{// Load it!}}
\DoxyCodeLine{00227     std::string scriptSource = \textcolor{stringliteral}{""};}
\DoxyCodeLine{00228     \textcolor{keywordflow}{if}(!IOManager::readFileToBuffer(fullPath.c\_str(), scriptSource))}
\DoxyCodeLine{00229     \{}
\DoxyCodeLine{00230         \textcolor{comment}{// There was a problem reading, return an uninited script}}
\DoxyCodeLine{00231         \textcolor{keywordflow}{return} LuaScript();}
\DoxyCodeLine{00232     \}}
\DoxyCodeLine{00233 }
\DoxyCodeLine{00234     \textcolor{comment}{// Put it in the cache!}}
\DoxyCodeLine{00235     LuaScript* script = m\_scripts-\/>createItem(fullPath);}
\DoxyCodeLine{00236     \textcolor{comment}{// and actually give it data lol.}}
\DoxyCodeLine{00237     script-\/>m\_script = scriptSource;}
\DoxyCodeLine{00238     script-\/>m\_path = fullPath;}
\DoxyCodeLine{00239     script-\/>inited = \textcolor{keyword}{true};}
\DoxyCodeLine{00240 }
\DoxyCodeLine{00241     \textcolor{keywordflow}{return} *script;}
\DoxyCodeLine{00242 \}}
\DoxyCodeLine{00243 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00244}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ae8cf04384771d20f7a636c4757f722c2}{00244}} LuaScript ResourceManager::loadScriptFromSource(std::string\& scriptSource, std::string name)}
\DoxyCodeLine{00245 \{}
\DoxyCodeLine{00246     \textcolor{comment}{// Make sure we don't already have it loaded}}
\DoxyCodeLine{00247     LuaScript* searched = m\_scripts-\/>findItem(name);}
\DoxyCodeLine{00248     \textcolor{keywordflow}{if}(searched)}
\DoxyCodeLine{00249     \{}
\DoxyCodeLine{00250         \textcolor{keywordflow}{return} *searched;}
\DoxyCodeLine{00251     \}}
\DoxyCodeLine{00252 }
\DoxyCodeLine{00253     \textcolor{comment}{// Put it in the cache!}}
\DoxyCodeLine{00254     LuaScript* script = m\_scripts-\/>createItem(name);}
\DoxyCodeLine{00255     \textcolor{comment}{// and actually give it data lol.}}
\DoxyCodeLine{00256     script-\/>m\_script = scriptSource;}
\DoxyCodeLine{00257     script-\/>m\_path = \textcolor{stringliteral}{"NO\_PATH"};}
\DoxyCodeLine{00258     script-\/>inited = \textcolor{keyword}{true};}
\DoxyCodeLine{00259 }
\DoxyCodeLine{00260     \textcolor{keywordflow}{return} *script;}
\DoxyCodeLine{00261 \}}
\DoxyCodeLine{00262 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00263}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a779c084be78d6e03a8083cb109b85509}{00263}} Font ResourceManager::loadFont(std::string\& fontPath, \textcolor{keywordtype}{int} size)}
\DoxyCodeLine{00264 \{}
\DoxyCodeLine{00265     std::string path = m\_assetsPathPrefix + fontPath + std::to\_string(size);}
\DoxyCodeLine{00266 }
\DoxyCodeLine{00267     \textcolor{comment}{// Check we haven't cached it}}
\DoxyCodeLine{00268     \{}
\DoxyCodeLine{00269     Font* cached = m\_fonts-\/>findItem(path);}
\DoxyCodeLine{00270 }
\DoxyCodeLine{00271     \textcolor{keywordflow}{if}(cached)}
\DoxyCodeLine{00272         \textcolor{keywordflow}{return} *cached;}
\DoxyCodeLine{00273     \}}
\DoxyCodeLine{00274 }
\DoxyCodeLine{00275     \textcolor{comment}{// We don't already have it. Time to create it!}}
\DoxyCodeLine{00276     Font* font = m\_fonts-\/>createItem(path);}
\DoxyCodeLine{00277 }
\DoxyCodeLine{00278     font-\/>init((m\_assetsPathPrefix + fontPath).c\_str(), size);}
\DoxyCodeLine{00279 }
\DoxyCodeLine{00280     \textcolor{keywordflow}{return} *font;}
\DoxyCodeLine{00281 \}}
\DoxyCodeLine{00282 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00283}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_acbc049762c33d9f98ddbc5add7e20174}{00283}} \textcolor{keywordtype}{void} ResourceManager::clearCaches()}
\DoxyCodeLine{00284 \{}
\DoxyCodeLine{00285     m\_textures-\/>clear();}
\DoxyCodeLine{00286     m\_mutableTextures-\/>clear();}
\DoxyCodeLine{00287     m\_sounds-\/>clear();}
\DoxyCodeLine{00288     m\_scripts-\/>clear();}
\DoxyCodeLine{00289     m\_fonts-\/>clear();}
\DoxyCodeLine{00290 }
\DoxyCodeLine{00291     Logger::getInstance()-\/>log(\textcolor{stringliteral}{"Cleared all caches."});}
\DoxyCodeLine{00292 \}}
\DoxyCodeLine{00293 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00294}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ab6476c13f6b092cbda16abcd0d995a39}{00294}} \textcolor{keywordtype}{void} ResourceManager::setAssetsPathPrefix(std::string prefix)}
\DoxyCodeLine{00295 \{}
\DoxyCodeLine{00296     m\_assetsPathPrefix = prefix;}
\DoxyCodeLine{00297 \}}
\DoxyCodeLine{00298 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00299}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a1a07f9d4bebd35321669d3fb0049962e}{00299}} std::string ResourceManager::getAssetsPathPrefix()}
\DoxyCodeLine{00300 \{}
\DoxyCodeLine{00301     \textcolor{keywordflow}{return} m\_assetsPathPrefix;}
\DoxyCodeLine{00302 \}}
\DoxyCodeLine{00303 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00304}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ad240c178b1286f53560ead6b41e7e58b}{00304}} \textcolor{keywordtype}{void} ResourceManager::setTexturePathPrefix(std::string prefix)}
\DoxyCodeLine{00305 \{}
\DoxyCodeLine{00306     m\_texturePathPrefix = prefix;}
\DoxyCodeLine{00307 \}}
\DoxyCodeLine{00308 }
\DoxyCodeLine{00309 \} \textcolor{comment}{// namespace BARE2D}}

\end{DoxyCode}
