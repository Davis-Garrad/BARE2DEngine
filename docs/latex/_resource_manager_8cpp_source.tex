\hypertarget{_resource_manager_8cpp_source}{}\doxysection{Resource\+Manager.\+cpp}
\label{_resource_manager_8cpp_source}\index{Source/ResourceManager.cpp@{Source/ResourceManager.cpp}}
\mbox{\hyperlink{_resource_manager_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_resource_manager_8hpp}{ResourceManager.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00003}00003 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00004}00004 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00006}00006 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_i_o_manager_8hpp}{IOManager.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00007}00007 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_b_a_r_e_errors_8hpp}{BAREErrors.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00008}00008 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_pico_p_n_g_8hpp}{PicoPNG.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00009}00009 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_g_l_context_manager_8hpp}{GLContextManager.hpp}}"{}}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00010}00010 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00011}00011 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_b_a_r_e2_d}{BARE2D}} \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00012}00012 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00013}00013     std::string                         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{ResourceManager::m\_assetsPathPrefix}}   = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00014}00014     std::string                         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ae2ce555c4bd7d242b06c28a7e0e62911}{ResourceManager::m\_texturePathPrefix}} = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00015}00015     Cache<std::string, Texture>*        \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aef356f0e3af2856831be8261e709c123}{ResourceManager::m\_textures}}           = \textcolor{keyword}{new} Cache<std::string, Texture>();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00016}00016     Cache<std::string, MutableTexture>* \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af37a2453e77e3be960fff4aa2b2da8ae}{ResourceManager::m\_mutableTextures}}     = \textcolor{keyword}{new} Cache<std::string, MutableTexture>();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00017}00017     Cache<std::string, Sound>*          \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aab37254031dcd1edbccf620db0a112ec}{ResourceManager::m\_sounds}}           = \textcolor{keyword}{new} Cache<std::string, Sound>();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00018}00018     Cache<std::string, Music>*          \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a80ad48866e1f1e167e12979dc61df541}{ResourceManager::m\_music}}             = \textcolor{keyword}{new} Cache<std::string, Music>();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00019}00019     Cache<std::string, LuaScript>*      \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ada3e87411dbccc8c5628c7f7d89e2f68}{ResourceManager::m\_scripts}}             = \textcolor{keyword}{new} Cache<std::string, LuaScript>();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00020}00020     Cache<std::string, Font>*           \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af110c53a19953db73ece62790759e049}{ResourceManager::m\_fonts}}             = \textcolor{keyword}{new} Cache<std::string, Font>();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00021}00021 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00022}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a00ef658172786a81106218cc6035bc13}{00022}}     \mbox{\hyperlink{class_b_a_r_e2_d_1_1_shader_program}{ShaderProgram}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a00ef658172786a81106218cc6035bc13}{ResourceManager::loadShaders}}(std::string\& \mbox{\hyperlink{_debug_renderer_8cpp_a37f0ddb78fae32d986af3d36f519b8a0}{vertShaderSource}}, std::string\& \mbox{\hyperlink{_debug_renderer_8cpp_acd081826074d389a71e56bb22617403f}{fragShaderSource}}) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00023}00023         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_shader_program}{ShaderProgram}} newProgram;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00025}00025         newProgram.\mbox{\hyperlink{class_b_a_r_e2_d_1_1_shader_program_acf78cf9b4988abf40d62d67471a168a3}{compileShaders}}((\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}} + \mbox{\hyperlink{_debug_renderer_8cpp_a37f0ddb78fae32d986af3d36f519b8a0}{vertShaderSource}}).c\_str(),}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00026}00026                                   (\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}} + \mbox{\hyperlink{_debug_renderer_8cpp_acd081826074d389a71e56bb22617403f}{fragShaderSource}}).c\_str());}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00028}00028         \textcolor{keywordflow}{return} newProgram;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00029}00029     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00030}00030 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00031}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a5dbae5c36f78ce4feb0ec3c0b8d1728a}{00031}}     \mbox{\hyperlink{class_b_a_r_e2_d_1_1_shader_program}{ShaderProgram}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a5dbae5c36f78ce4feb0ec3c0b8d1728a}{ResourceManager::loadShadersFromSource}}(std::string\& \mbox{\hyperlink{_debug_renderer_8cpp_a37f0ddb78fae32d986af3d36f519b8a0}{vertShaderSource}}, std::string\& \mbox{\hyperlink{_debug_renderer_8cpp_acd081826074d389a71e56bb22617403f}{fragShaderSource}}) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00032}00032         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_shader_program}{ShaderProgram}} newProgram;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00033}00033 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00034}00034         newProgram.\mbox{\hyperlink{class_b_a_r_e2_d_1_1_shader_program_a805e1e0c2b0ecd5d9625deed62d45c1c}{compileShadersFromSource}}(\mbox{\hyperlink{_debug_renderer_8cpp_a37f0ddb78fae32d986af3d36f519b8a0}{vertShaderSource}}.c\_str(), \mbox{\hyperlink{_debug_renderer_8cpp_acd081826074d389a71e56bb22617403f}{fragShaderSource}}.c\_str());}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00035}00035 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00036}00036         \textcolor{keywordflow}{return} newProgram;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00037}00037     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00038}00038 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00039}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af4bb03a60f5fdb3ec94064e17c84e823}{00039}}     \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture}{Texture}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af4bb03a60f5fdb3ec94064e17c84e823}{ResourceManager::loadTexture}}(std::string\& texturePath) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00040}00040         std::string fullPath = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}} + \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ae2ce555c4bd7d242b06c28a7e0e62911}{m\_texturePathPrefix}} + texturePath;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00042}00042         \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00043}00043             \textcolor{comment}{// First, check that it doesn't already exist.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00044}00044             \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture}{Texture}}* cached = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aef356f0e3af2856831be8261e709c123}{m\_textures}}-\/>findItem(fullPath);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00045}00045 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00046}00046             \textcolor{keywordflow}{if}(cached)}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00047}00047                 \textcolor{keywordflow}{return} *cached;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00048}00048         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00050}00050         \textcolor{comment}{// So, it's not in the cache if we're still here. Load it from a file, create it in the cache, and add it.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00051}00051         \textcolor{comment}{// Creates it in the cache and returns a pointer.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00052}00052         \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture}{Texture}}* loadedTex   = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aef356f0e3af2856831be8261e709c123}{m\_textures}}-\/>createItem(fullPath);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00053}00053         loadedTex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a5180877b8d9b7ccc44a50418fc925511}{filepath}} = fullPath;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00054}00054         \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00055}00055             \textcolor{comment}{// Load raw data from the file}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00056}00056             std::vector<unsigned char> fileData;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00057}00057             \textcolor{keywordtype}{bool}                       good = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_i_o_manager_a41811805a88efeab7589a0e0c9015f90}{IOManager::readFileToBuffer}}(fullPath, fileData);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00059}00059             \textcolor{comment}{// Check for errors}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00060}00060             \textcolor{keywordflow}{if}(!good) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00061}00061                 \mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{throwFatalError}}(\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15a875ae376eb2fbd99c364b0c2ed42fedc}{BAREError::TEXTURE\_FAILURE}});}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00062}00062                 \textcolor{keywordflow}{return} *loadedTex;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00063}00063             \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00065}00065             \textcolor{comment}{// Decode the raw information into texture data (thanks PicoPNG!)}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00066}00066             std::vector<unsigned char> textureData;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00067}00067             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long}              width, height;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00068}00068             \textcolor{keywordtype}{int}                        errCode = \mbox{\hyperlink{namespace_b_a_r_e2_d_a480b5f334854e31c2d7e026933129480}{decodePNG}}(textureData, width, height, \&(fileData[0]), fileData.size());}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00069}00069             loadedTex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a4ce2075c242a0865cf7d47ef6c385c0a}{width}}                  = width;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00070}00070             loadedTex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a4092f55b99d2293162311edfe786adb0}{height}}                = height;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00072}00072             \textcolor{comment}{// Check if pico broke}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00073}00073             \textcolor{keywordflow}{if}(errCode != 0) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00074}00074                 \mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{throwFatalError}}(\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15a875ae376eb2fbd99c364b0c2ed42fedc}{BAREError::TEXTURE\_FAILURE}});}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00075}00075                 \textcolor{keywordflow}{return} *loadedTex;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00076}00076             \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00078}00078             \textcolor{comment}{// Our data is good, so actually generate the texture, etc.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00079}00079             glGenTextures((GLsizei)1, \&(loadedTex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a99d41bfc04d894d81e10c5b4d7aed1ab}{id}}));}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00080}00080 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00081}00081             \textcolor{comment}{// Bind the texture object}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00082}00082             \mbox{\hyperlink{class_b_a_r_e2_d_1_1_g_l_context_manager_a733646522bf07c33576f9a1e0bb76c28}{GLContextManager::getContext}}()-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_g_l_context_a1815cdbe70cc6fdbc66ec69a7131b5be}{bindTexture}}(GL\_TEXTURE\_2D, loadedTex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a99d41bfc04d894d81e10c5b4d7aed1ab}{id}});}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00084}00084             \textcolor{comment}{// Upload pixel data}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00085}00085             glTexImage2D(GL\_TEXTURE\_2D,}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00086}00086                          (GLint)0,}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00087}00087                          GL\_RGBA,}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00088}00088                          (GLsizei)loadedTex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a4ce2075c242a0865cf7d47ef6c385c0a}{width}},}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00089}00089                          (GLsizei)loadedTex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a4092f55b99d2293162311edfe786adb0}{height}},}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00090}00090                          (GLint)0,}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00091}00091                          GL\_RGBA,}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00092}00092                          GL\_UNSIGNED\_BYTE,}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00093}00093                          \&(textureData[0]));}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00094}00094 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00095}00095             \textcolor{comment}{// Set some basic parameters}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00096}00096             glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_S, GL\_CLAMP\_TO\_BORDER);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00097}00097             glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_T, GL\_CLAMP\_TO\_BORDER);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00098}00098             glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MAG\_FILTER, GL\_NEAREST);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00099}00099             glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MIN\_FILTER, GL\_NEAREST\_MIPMAP\_LINEAR);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00100}00100 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00101}00101             \textcolor{comment}{// Generate mipmaps}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00102}00102             glGenerateMipmap(GL\_TEXTURE\_2D);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00103}00103 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00104}00104             \textcolor{comment}{// Finally, unbind the texture.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00105}00105             \mbox{\hyperlink{class_b_a_r_e2_d_1_1_g_l_context_manager_a733646522bf07c33576f9a1e0bb76c28}{GLContextManager::getContext}}()-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_g_l_context_a1815cdbe70cc6fdbc66ec69a7131b5be}{bindTexture}}(GL\_TEXTURE\_2D, 0);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00106}00106         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00107}00107 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00108}00108         \textcolor{comment}{// Now that we know our texture definitely exists, we just return an instance of it!}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00109}00109         \textcolor{keywordflow}{return} *loadedTex;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00110}00110     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00111}00111 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00112}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a05a7123519dfb03fa23088785eb4ece4}{00112}}     \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_mutable_texture}{MutableTexture}}* \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a05a7123519dfb03fa23088785eb4ece4}{ResourceManager::createMutableTexture}}(std::string\& textureName,}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00113}00113                                                           \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} width,}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00114}00114                                                           \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} height,}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00115}00115                                                           GLenum       minMagFilter \textcolor{comment}{/* = GL\_LINEAR*/},}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00116}00116                                                           \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} channels \textcolor{comment}{/* = 4*/},}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00117}00117                                                           GLenum       format \textcolor{comment}{/* = GL\_RGBA*/}) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00118}00118         \textcolor{comment}{// First, check if there's already a texture by this name:}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00119}00119         \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_mutable_texture}{MutableTexture}}* tex = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a9cc8ee112230160452a17bebd7d7b096}{loadMutableTexture}}(textureName);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00120}00120 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00121}00121         \textcolor{comment}{// If we don't already have one generated, we need to do so:}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00122}00122         \textcolor{keywordflow}{if}(!tex) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00123}00123             tex = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af37a2453e77e3be960fff4aa2b2da8ae}{m\_mutableTextures}}-\/>createItem(textureName);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00124}00124             glGenTextures(1, \&(tex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a99d41bfc04d894d81e10c5b4d7aed1ab}{id}}));}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00125}00125         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00126}00126 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00127}00127         \textcolor{comment}{// Now that we have a texture, we need to set some parameters}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00128}00128         \textcolor{comment}{// First, BARE parameters.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00129}00129         tex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a4ce2075c242a0865cf7d47ef6c385c0a}{width}}   = width;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00130}00130         tex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a4092f55b99d2293162311edfe786adb0}{height}}     = height;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00131}00131         tex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a5180877b8d9b7ccc44a50418fc925511}{filepath}} = textureName;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00132}00132         tex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_mutable_texture_a5650eb4779b1dabe66bf5141f8e921f1}{channels}} = channels;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00133}00133         tex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_mutable_texture_a74d438f59e966611f193cbc82b49f3ad}{format}}     = format;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00134}00134 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00135}00135         \textcolor{comment}{// Now for OpenGL parameters.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00136}00136         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_g_l_context_manager_a733646522bf07c33576f9a1e0bb76c28}{GLContextManager::getContext}}()-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_g_l_context_a1815cdbe70cc6fdbc66ec69a7131b5be}{bindTexture}}(GL\_TEXTURE\_2D, tex-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_texture_a99d41bfc04d894d81e10c5b4d7aed1ab}{id}});}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00137}00137 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00138}00138         \textcolor{comment}{// Specify it as a texture}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00139}00139         glTexImage2D(GL\_TEXTURE\_2D, 0, format, width, height, 0, format, GL\_UNSIGNED\_BYTE, \textcolor{keyword}{nullptr});}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00140}00140 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00141}00141         \textcolor{comment}{// Will never want wrapping hopefully.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00142}00142         glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_S, GL\_CLAMP\_TO\_EDGE);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00143}00143         glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_WRAP\_T, GL\_CLAMP\_TO\_EDGE);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00144}00144 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00145}00145         glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MAG\_FILTER, minMagFilter);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00146}00146         glTexParameteri(GL\_TEXTURE\_2D, GL\_TEXTURE\_MIN\_FILTER, minMagFilter);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00147}00147 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00148}00148         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_g_l_context_manager_a733646522bf07c33576f9a1e0bb76c28}{GLContextManager::getContext}}()-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_g_l_context_a1815cdbe70cc6fdbc66ec69a7131b5be}{bindTexture}}(GL\_TEXTURE\_2D, 0);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00149}00149 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00150}00150         \textcolor{keywordflow}{return} tex;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00151}00151     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00152}00152 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00153}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a9cc8ee112230160452a17bebd7d7b096}{00153}}     \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_mutable_texture}{MutableTexture}}* \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a9cc8ee112230160452a17bebd7d7b096}{ResourceManager::loadMutableTexture}}(std::string\& textureName) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00154}00154         \textcolor{comment}{// Find it in the cache. If none exists, return nullptr, not a new one.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00155}00155         \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_mutable_texture}{MutableTexture}}* tex = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af37a2453e77e3be960fff4aa2b2da8ae}{m\_mutableTextures}}-\/>findItem(textureName);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00156}00156 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00157}00157         \textcolor{keywordflow}{return} tex;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00158}00158     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00159}00159 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00160}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ad6a90b54eb05009c05cdfd3794e69855}{00160}}     \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_sound}{Sound}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ad6a90b54eb05009c05cdfd3794e69855}{ResourceManager::loadSound}}(std::string\& soundPath) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00161}00161         std::string fullPath = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}} + soundPath;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00162}00162 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00163}00163         \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_sound}{Sound}}* searched = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aab37254031dcd1edbccf620db0a112ec}{m\_sounds}}-\/>findItem(fullPath);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00164}00164         \textcolor{keywordflow}{if}(searched) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00165}00165             \textcolor{keywordflow}{return} *searched; \textcolor{comment}{// We've already got it in the cache}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00166}00166         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00167}00167 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00168}00168         \textcolor{comment}{// Cache doesn't have it. Load it.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00169}00169         Mix\_Chunk* chunk = Mix\_LoadWAV(fullPath.c\_str());}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00170}00170         \textcolor{keywordflow}{if}(!chunk) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00171}00171             \textcolor{comment}{// There's been an error!}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00172}00172             \mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{throwFatalError}}(\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15a8c106f4878dae2d0ad02cd72ef80dc0b}{BAREError::SDL\_MIXER\_LOAD\_FAILURE}}, \textcolor{stringliteral}{"{}Failed to load sound: "{}} + std::string(Mix\_GetError()));}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00173}00173         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00174}00174 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00175}00175         \textcolor{comment}{// Create a new one in the cache.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00176}00176         \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_sound}{Sound}}* created = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aab37254031dcd1edbccf620db0a112ec}{m\_sounds}}-\/>createItem(fullPath);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00177}00177         created-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_sound_a7a7988496f24001a00c9bc9ab435c7f0}{chunk}} = chunk;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00178}00178 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00179}00179         \textcolor{keywordflow}{return} *created;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00180}00180     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00181}00181 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00182}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a5d3afd3f5800a9a502a2a1e5311a513a}{00182}}     \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_music}{Music}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a5d3afd3f5800a9a502a2a1e5311a513a}{ResourceManager::loadMusic}}(std::string\& musicPath) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00183}00183         std::string fullPath = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}} + musicPath;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00184}00184 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00185}00185         \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_music}{Music}}* searched = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a80ad48866e1f1e167e12979dc61df541}{m\_music}}-\/>findItem(fullPath);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00186}00186         \textcolor{keywordflow}{if}(searched) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00187}00187             \textcolor{keywordflow}{return} *searched; \textcolor{comment}{// We've already got it in the cache}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00188}00188         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00189}00189 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00190}00190         \textcolor{comment}{// Cache doesn't have it. Load it.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00191}00191         Mix\_Music* musicChunk = Mix\_LoadMUS(fullPath.c\_str());}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00192}00192         \textcolor{keywordflow}{if}(!musicChunk) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00193}00193             \textcolor{comment}{// There's been an error!}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00194}00194             \mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{throwFatalError}}(\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15a8c106f4878dae2d0ad02cd72ef80dc0b}{BAREError::SDL\_MIXER\_LOAD\_FAILURE}}, \textcolor{stringliteral}{"{}Failed to load music: "{}} + std::string(Mix\_GetError()));}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00195}00195         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00196}00196 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00197}00197         \textcolor{comment}{// Create a new one in the cache.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00198}00198         \mbox{\hyperlink{struct_b_a_r_e2_d_1_1_music}{Music}}* created = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a80ad48866e1f1e167e12979dc61df541}{m\_music}}-\/>createItem(fullPath);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00199}00199         created-\/>\mbox{\hyperlink{struct_b_a_r_e2_d_1_1_music_a5f2efbe8587e9f5e8a03492e868cf848}{music}} = musicChunk;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00200}00200 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00201}00201         \textcolor{keywordflow}{return} *created;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00202}00202     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00203}00203 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00204}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aa40f3016ed65df8b01ce2608349ee61b}{00204}}     \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{LuaScript}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aa40f3016ed65df8b01ce2608349ee61b}{ResourceManager::loadScript}}(std::string\& scriptPath) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00205}00205         \textcolor{keywordflow}{if}(scriptPath == \textcolor{stringliteral}{"{}"{}})}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00206}00206             \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{LuaScript}}();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00207}00207 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00208}00208         std::string fullPath = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}} + scriptPath;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00209}00209 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00210}00210         \textcolor{comment}{// Make sure we don't already have it loaded}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00211}00211         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{LuaScript}}* searched = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ada3e87411dbccc8c5628c7f7d89e2f68}{m\_scripts}}-\/>findItem(fullPath);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00212}00212         \textcolor{keywordflow}{if}(searched) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00213}00213             \textcolor{keywordflow}{return} *searched;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00214}00214         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00215}00215 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00216}00216         \textcolor{comment}{// Just needs to load text from a script file and put it into a LuaScript object, then put that into the cache.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00217}00217         \textcolor{comment}{// Load it!}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00218}00218         std::string scriptSource = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00219}00219         \textcolor{keywordflow}{if}(!\mbox{\hyperlink{class_b_a_r_e2_d_1_1_i_o_manager_a41811805a88efeab7589a0e0c9015f90}{IOManager::readFileToBuffer}}(fullPath.c\_str(), scriptSource)) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00220}00220             \textcolor{comment}{// There was a problem reading, return an uninited script}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00221}00221             \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{LuaScript}}();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00222}00222         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00223}00223 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00224}00224         \textcolor{comment}{// Put it in the cache!}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00225}00225         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{LuaScript}}* script = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ada3e87411dbccc8c5628c7f7d89e2f68}{m\_scripts}}-\/>createItem(fullPath);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00226}00226         \textcolor{comment}{// and actually give it data lol.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00227}00227         script-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_a1995fc1d69d00731e44a4525542e4f2f}{m\_script}} = scriptSource;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00228}00228         script-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_ad2b38a4cdcf661bbf4d44c99bd39dac0}{m\_path}}     = fullPath;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00229}00229         script-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_a85800f148edadb7a6755f1edcc2f3b50}{inited}}     = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00230}00230 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00231}00231         \textcolor{keywordflow}{return} *script;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00232}00232     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00233}00233 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00234}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ae8cf04384771d20f7a636c4757f722c2}{00234}}     \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{LuaScript}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ae8cf04384771d20f7a636c4757f722c2}{ResourceManager::loadScriptFromSource}}(std::string\& scriptSource, std::string name) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00235}00235         \textcolor{comment}{// Make sure we don't already have it loaded}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00236}00236         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{LuaScript}}* searched = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ada3e87411dbccc8c5628c7f7d89e2f68}{m\_scripts}}-\/>findItem(name);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00237}00237         \textcolor{keywordflow}{if}(searched) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00238}00238             \textcolor{keywordflow}{return} *searched;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00239}00239         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00240}00240 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00241}00241         \textcolor{comment}{// Put it in the cache!}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00242}00242         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script}{LuaScript}}* script = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ada3e87411dbccc8c5628c7f7d89e2f68}{m\_scripts}}-\/>createItem(name);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00243}00243         \textcolor{comment}{// and actually give it data lol.}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00244}00244         script-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_a1995fc1d69d00731e44a4525542e4f2f}{m\_script}} = scriptSource;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00245}00245         script-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_ad2b38a4cdcf661bbf4d44c99bd39dac0}{m\_path}}     = \textcolor{stringliteral}{"{}NO\_PATH"{}};}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00246}00246         script-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_lua_script_a85800f148edadb7a6755f1edcc2f3b50}{inited}}     = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00247}00247 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00248}00248         \textcolor{keywordflow}{return} *script;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00249}00249     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00250}00250 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00251}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a779c084be78d6e03a8083cb109b85509}{00251}}     \mbox{\hyperlink{class_b_a_r_e2_d_1_1_font}{Font}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a779c084be78d6e03a8083cb109b85509}{ResourceManager::loadFont}}(std::string\& fontPath, \textcolor{keywordtype}{int} size) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00252}00252         std::string path = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}} + fontPath + std::to\_string(size);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00253}00253 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00254}00254         \textcolor{comment}{// Check we haven't cached it}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00255}00255         \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00256}00256             \mbox{\hyperlink{class_b_a_r_e2_d_1_1_font}{Font}}* cached = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af110c53a19953db73ece62790759e049}{m\_fonts}}-\/>findItem(path);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00257}00257 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00258}00258             \textcolor{keywordflow}{if}(cached)}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00259}00259                 \textcolor{keywordflow}{return} *cached;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00260}00260         \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00261}00261 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00262}00262         \textcolor{comment}{// We don't already have it. Time to create it!}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00263}00263         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_font}{Font}}* font = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af110c53a19953db73ece62790759e049}{m\_fonts}}-\/>createItem(path);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00264}00264 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00265}00265         font-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_font_a4448baad55264df37021c5e24a033b29}{init}}((\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}} + fontPath).c\_str(), size);}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00266}00266 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00267}00267         \textcolor{keywordflow}{return} *font;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00268}00268     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00269}00269 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00270}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_acbc049762c33d9f98ddbc5add7e20174}{00270}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_acbc049762c33d9f98ddbc5add7e20174}{ResourceManager::clearCaches}}() \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00271}00271         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aef356f0e3af2856831be8261e709c123}{m\_textures}}-\/>clear();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00272}00272         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af37a2453e77e3be960fff4aa2b2da8ae}{m\_mutableTextures}}-\/>clear();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00273}00273         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_aab37254031dcd1edbccf620db0a112ec}{m\_sounds}}-\/>clear();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00274}00274         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ada3e87411dbccc8c5628c7f7d89e2f68}{m\_scripts}}-\/>clear();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00275}00275         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_af110c53a19953db73ece62790759e049}{m\_fonts}}-\/>clear();}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00276}00276 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00277}00277         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_logger_af9e46266b594528fe87ce3e9264033ec}{Logger::getInstance}}()-\/>\mbox{\hyperlink{class_b_a_r_e2_d_1_1_logger_a76c97e021ee75d17defbc794f68a965b}{log}}(\textcolor{stringliteral}{"{}Cleared all caches."{}});}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00278}00278     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00279}00279 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00280}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ab6476c13f6b092cbda16abcd0d995a39}{00280}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ab6476c13f6b092cbda16abcd0d995a39}{ResourceManager::setAssetsPathPrefix}}(std::string prefix) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00281}00281         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}} = prefix;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00282}00282     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00283}00283 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00284}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a1a07f9d4bebd35321669d3fb0049962e}{00284}}     std::string \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a1a07f9d4bebd35321669d3fb0049962e}{ResourceManager::getAssetsPathPrefix}}() \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00285}00285         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_a3648e65a361380d80f01a911df867e7b}{m\_assetsPathPrefix}};}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00286}00286     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00287}00287 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00288}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ad240c178b1286f53560ead6b41e7e58b}{00288}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ad240c178b1286f53560ead6b41e7e58b}{ResourceManager::setTexturePathPrefix}}(std::string prefix) \{}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00289}00289         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_resource_manager_ae2ce555c4bd7d242b06c28a7e0e62911}{m\_texturePathPrefix}} = prefix;}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00290}00290     \}}
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00291}00291 }
\DoxyCodeLine{\Hypertarget{_resource_manager_8cpp_source_l00292}00292 \} \textcolor{comment}{// namespace BARE2D}}

\end{DoxyCode}
