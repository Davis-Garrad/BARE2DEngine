\hypertarget{_cache__impl_8tcc_source}{}\doxysection{Cache\+\_\+impl.\+tcc}
\label{_cache__impl_8tcc_source}\index{Source/Cache\_impl.tcc@{Source/Cache\_impl.tcc}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{pragma} \textcolor{preprocessor}{once}}
\DoxyCodeLine{00002 \textcolor{comment}{// This holds all the non-\/specialized templates for Cache.hpp}}
\DoxyCodeLine{00003 }
\DoxyCodeLine{00004 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \mbox{\hyperlink{_b_a_r_e_errors_8hpp}{"BAREErrors.hpp"}}}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{keyword}{namespace} \mbox{\hyperlink{namespace_b_a_r_e2_d}{BARE2D}} \{}
\DoxyCodeLine{00007 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00008}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{00008}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> T* \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}(S\& key)}
\DoxyCodeLine{00009 \{}
\DoxyCodeLine{00010     \textcolor{comment}{// Check if we have the item in the m\_data map}}
\DoxyCodeLine{00011 }
\DoxyCodeLine{00012     \textcolor{keyword}{auto} iter = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.find(key);}
\DoxyCodeLine{00013 }
\DoxyCodeLine{00014     \textcolor{keywordflow}{if}(iter == \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.end())}
\DoxyCodeLine{00015     \{}
\DoxyCodeLine{00016         \textcolor{keywordflow}{return} \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00017     \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{00018     \{}
\DoxyCodeLine{00019         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}[key];}
\DoxyCodeLine{00020     \}}
\DoxyCodeLine{00021 \}}
\DoxyCodeLine{00022 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00023}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a2104c4e21130200025f41c7339168726}{00023}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> T* \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a2104c4e21130200025f41c7339168726}{operator}}[](S\& key)}
\DoxyCodeLine{00024 \{}
\DoxyCodeLine{00025     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{(}}key\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{)}};}
\DoxyCodeLine{00026 \}}
\DoxyCodeLine{00027 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00028}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a941ca4d438d928c350542ca14eff7060}{00028}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a941ca4d438d928c350542ca14eff7060}{addItem}}(S\& key, T* item)}
\DoxyCodeLine{00029 \{}
\DoxyCodeLine{00030     \textcolor{keywordflow}{if}(\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{(}}key\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{)}})}
\DoxyCodeLine{00031     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00032     \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}[key] = item;}
\DoxyCodeLine{00033     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00034 \}}
\DoxyCodeLine{00035 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00036}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a2efaf06e9b135dfa5d39798013e8b49a}{00036}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a2efaf06e9b135dfa5d39798013e8b49a}{setItem}}(S\& key, T* item)}
\DoxyCodeLine{00037 \{}
\DoxyCodeLine{00038     \textcolor{keywordflow}{if}(\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{(}}key\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{)}})}
\DoxyCodeLine{00039     \{}
\DoxyCodeLine{00040         \textcolor{keyword}{delete} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{(}}key\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{)}};}
\DoxyCodeLine{00041     \}}
\DoxyCodeLine{00042     \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}[key] = item;}
\DoxyCodeLine{00043     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00044 \}}
\DoxyCodeLine{00045 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00046}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a53efea053229e95e986fcf9d583a130a}{00046}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> T* \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a53efea053229e95e986fcf9d583a130a}{createItem}}(S\& key, std::function<T*()> creationFunc)}
\DoxyCodeLine{00047 \{}
\DoxyCodeLine{00048     \textcolor{comment}{// Creates an item, or overwrites the existing item if it already exists.}}
\DoxyCodeLine{00049 }
\DoxyCodeLine{00050     \textcolor{comment}{// Check if it already exists}}
\DoxyCodeLine{00051     T* object = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{(}}key\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{)}};}
\DoxyCodeLine{00052 }
\DoxyCodeLine{00053     \textcolor{comment}{// nullptr if object doesn't already exist}}
\DoxyCodeLine{00054     \textcolor{keywordflow}{if}(object)}
\DoxyCodeLine{00055     \{}
\DoxyCodeLine{00056         \mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{throwFatalError}}\mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{(}}\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15}{BAREError}}\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15a66dc4c888c801d815b8f5f1f1038393c}{::}}\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15a66dc4c888c801d815b8f5f1f1038393c}{CACHE\_FAILURE}}\mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{,}} \textcolor{stringliteral}{"Item was created twice."}\mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{)}};}
\DoxyCodeLine{00057         \textcolor{keywordflow}{return} \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00058     \}}
\DoxyCodeLine{00059 }
\DoxyCodeLine{00060     \textcolor{comment}{// Now we know the object doesn't exist, so we need to create one!}}
\DoxyCodeLine{00061     object = creationFunc();}
\DoxyCodeLine{00062 }
\DoxyCodeLine{00063     \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.insert(std::make\_pair(key, object));}
\DoxyCodeLine{00064 }
\DoxyCodeLine{00065     \textcolor{keywordflow}{return} object;}
\DoxyCodeLine{00066 \}}
\DoxyCodeLine{00067 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00068}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a236da756530af9b46a3000637c5c5f53}{00068}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a236da756530af9b46a3000637c5c5f53}{clear}}()}
\DoxyCodeLine{00069 \{}
\DoxyCodeLine{00070     \textcolor{comment}{// Deletes all in m\_data, then clears m\_data.}}
\DoxyCodeLine{00071     \textcolor{comment}{// Delete em all}}
\DoxyCodeLine{00072     \textcolor{keywordflow}{for}(std::pair<S, T*> i : \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}})}
\DoxyCodeLine{00073     \{}
\DoxyCodeLine{00074         \textcolor{keyword}{delete} i.second;}
\DoxyCodeLine{00075     \}}
\DoxyCodeLine{00076 }
\DoxyCodeLine{00077     \textcolor{comment}{// Clear it all}}
\DoxyCodeLine{00078     \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.clear();}
\DoxyCodeLine{00079 \}}
\DoxyCodeLine{00080 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00081}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a10e71ebcdf2c43daa1c2d3a6e576d465}{00081}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a10e71ebcdf2c43daa1c2d3a6e576d465}{getCount}}()}
\DoxyCodeLine{00082 \{}
\DoxyCodeLine{00083     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.size();}
\DoxyCodeLine{00084 \}}
\DoxyCodeLine{00085 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00086}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a3964d9554d08b43fe0cc6a72571d36d5}{00086}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> \textcolor{keyword}{typename} std::unordered\_map<S, T*>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a3964d9554d08b43fe0cc6a72571d36d5}{iterator}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a3964d9554d08b43fe0cc6a72571d36d5}{begin}}()}
\DoxyCodeLine{00087 \{}
\DoxyCodeLine{00088     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.begin();}
\DoxyCodeLine{00089 \}}
\DoxyCodeLine{00090 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00091}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a7d49e3b2cd0df86958d4355f3aa907e0}{00091}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> \textcolor{keyword}{typename} std::unordered\_map<S, T*>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a7d49e3b2cd0df86958d4355f3aa907e0}{iterator}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a7d49e3b2cd0df86958d4355f3aa907e0}{end}}()}
\DoxyCodeLine{00092 \{}
\DoxyCodeLine{00093     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.end();}
\DoxyCodeLine{00094 \}}
\DoxyCodeLine{00095 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00096}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_afc93ab1bc2175106d70ead2a55c12134}{00096}} \textcolor{keyword}{template} <\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T> \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_afc93ab1bc2175106d70ead2a55c12134}{operator}}!=(\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}\& other)}
\DoxyCodeLine{00097 \{}
\DoxyCodeLine{00098     \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}} != other.m\_data;}
\DoxyCodeLine{00099 \}}
\DoxyCodeLine{00100 }
\DoxyCodeLine{00101 \} \textcolor{comment}{// namespace BARE2D}}

\end{DoxyCode}
