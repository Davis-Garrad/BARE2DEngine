\hypertarget{_cache__impl_8tcc_source}{}\doxysection{Cache\+\_\+impl.\+tcc}
\label{_cache__impl_8tcc_source}\index{Source/Cache\_impl.tcc@{Source/Cache\_impl.tcc}}
\mbox{\hyperlink{_cache__impl_8tcc}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00001}00001 \#pragma once}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00002}00002 // This holds all the non-\/specialized templates for Cache.hpp}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00004}00004 \#include "{}BAREErrors.hpp"{}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00006}00006 namespace BARE2D}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00007}00007 \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00009}00009     template<typename S, typename T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00010}00010     T* Cache<S, T>::findItem(S\& key)}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00011}00011     \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00012}00012         // Check if we have the item in the m\_data map}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00013}00013 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00014}00014         auto iter = m\_data.find(key);}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00015}00015 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00016}00016         if(iter == m\_data.end()) \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00017}00017             return nullptr;}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00018}00018         \} else \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00019}00019             return m\_data[key];}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00020}00020         \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00021}00021     \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00022}00022 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00023}00023     template<typename S, typename T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00024}00024     T* Cache<S, T>::operator[](S\& key)}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00025}00025     \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00026}00026         return findItem(key);}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00027}00027     \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00029}00029     template<typename S, typename T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00030}00030     bool Cache<S, T>::addItem(S\& key, T* item)}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00031}00031     \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00032}00032         if(findItem(key)) return false;}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00033}00033         m\_data[key] = item;}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00034}00034         return true;}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00035}00035     \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00037}00037     template<typename S, typename T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00038}00038     T* Cache<S, T>::createItem(S\& key, std::function<T*()> creationFunc)}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00039}00039     \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00040}00040         // Creates an item, or overwrites the existing item if it already exists.}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00041}00041 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00042}00042         // Check if it already exists}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00043}00043         T* object = findItem(key);}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00045}00045         // nullptr if object doesn't already exist}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00046}00046         if(object) \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00047}00047             throwFatalError(BAREError::CACHE\_FAILURE, "{}Item was created twice."{});}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00048}00048             return nullptr;}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00049}00049         \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00050}00050 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00051}00051         // Now we know the object doesn't exist, so we need to create one!}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00052}00052         object = creationFunc();}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00053}00053 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00054}00054         m\_data.insert(std::make\_pair(key, object));}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00056}00056         return object;}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00057}00057     \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00058}00058 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00059}00059     template<typename S, typename T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00060}00060     void Cache<S, T>::clear()}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00061}00061     \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00062}00062         // Deletes all in m\_data, then clears m\_data.}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00063}00063         // Delete em all}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00064}00064         for(std::pair<S, T*> i : m\_data) \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00065}00065             delete i.second;}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00066}00066         \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00067}00067 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00068}00068         // Clear it all}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00069}00069         m\_data.clear();}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00070}00070     \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00071}00071 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00072}00072     template<typename S, typename T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00073}00073     unsigned int Cache<S, T>::getCount()}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00074}00074     \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00075}00075         return m\_data.size();}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00076}00076     \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00077}00077 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00078}00078     template<typename S, typename T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00079}00079     typename std::unordered\_map<S, T*>::iterator Cache<S, T>::begin()}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00080}00080     \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00081}00081         return m\_data.begin();}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00082}00082     \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00084}00084     template<typename S, typename T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00085}00085     typename std::unordered\_map<S, T*>::iterator Cache<S, T>::end()}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00086}00086     \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00087}00087         return m\_data.end();}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00088}00088     \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00089}00089 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00090}00090     template<typename S, typename T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00091}00091     bool Cache<S, T>::operator!=(Cache\& other)}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00092}00092     \{}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00093}00093         return m\_data != other.m\_data;}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00094}00094     \}}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00095}00095 }
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00096}00096 \}}

\end{DoxyCode}
