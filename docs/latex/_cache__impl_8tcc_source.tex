\hypertarget{_cache__impl_8tcc_source}{}\doxysection{Cache\+\_\+impl.\+tcc}
\label{_cache__impl_8tcc_source}\index{Source/Cache\_impl.tcc@{Source/Cache\_impl.tcc}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{pragma} \textcolor{preprocessor}{once}}
\DoxyCodeLine{00002 \textcolor{comment}{// This holds all the non-\/specialized templates for Cache.hpp}}
\DoxyCodeLine{00003 }
\DoxyCodeLine{00004 \textcolor{preprocessor}{\#}\textcolor{preprocessor}{include} \mbox{\hyperlink{_b_a_r_e_errors_8hpp}{"BAREErrors.hpp"}}}
\DoxyCodeLine{00005 }
\DoxyCodeLine{00006 \textcolor{keyword}{namespace} \mbox{\hyperlink{namespace_b_a_r_e2_d}{BARE2D}}}
\DoxyCodeLine{00007 \{}
\DoxyCodeLine{00008 }
\DoxyCodeLine{00009     \textcolor{keyword}{template}<\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00010}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{00010}}     T* \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}(S\& key)}
\DoxyCodeLine{00011     \{}
\DoxyCodeLine{00012         \textcolor{comment}{// Check if we have the item in the m\_data map}}
\DoxyCodeLine{00013 }
\DoxyCodeLine{00014         \textcolor{keyword}{auto} iter = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.find(key);}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016         \textcolor{keywordflow}{if}(iter == \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.end()) \{}
\DoxyCodeLine{00017             \textcolor{keywordflow}{return} \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00018         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00019             \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}[key];}
\DoxyCodeLine{00020         \}}
\DoxyCodeLine{00021     \}}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023     \textcolor{keyword}{template}<\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00024}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a2104c4e21130200025f41c7339168726}{00024}}     T* \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a2104c4e21130200025f41c7339168726}{operator}}[](S\& key)}
\DoxyCodeLine{00025     \{}
\DoxyCodeLine{00026         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{(}}key\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{)}};}
\DoxyCodeLine{00027     \}}
\DoxyCodeLine{00028 }
\DoxyCodeLine{00029     \textcolor{keyword}{template}<\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00030}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a941ca4d438d928c350542ca14eff7060}{00030}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a941ca4d438d928c350542ca14eff7060}{addItem}}(S\& key, T* item)}
\DoxyCodeLine{00031     \{}
\DoxyCodeLine{00032         \textcolor{keywordflow}{if}(\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{(}}key\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{)}}) \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{00033         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}[key] = item;}
\DoxyCodeLine{00034         \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{00035     \}}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037     \textcolor{keyword}{template}<\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00038}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9d9a551a6c283996062dad665172da0d}{00038}}     T* \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9d9a551a6c283996062dad665172da0d}{createItem}}(S\& key, std::function<T*()> creationFunc)}
\DoxyCodeLine{00039     \{}
\DoxyCodeLine{00040         \textcolor{comment}{// Creates an item, or overwrites the existing item if it already exists.}}
\DoxyCodeLine{00041 }
\DoxyCodeLine{00042         \textcolor{comment}{// Check if it already exists}}
\DoxyCodeLine{00043         T* object = \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{findItem}}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{(}}key\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a9b565e37194850c038b5bb3c3a784567}{)}};}
\DoxyCodeLine{00044 }
\DoxyCodeLine{00045         \textcolor{comment}{// nullptr if object doesn't already exist}}
\DoxyCodeLine{00046         \textcolor{keywordflow}{if}(object) \{}
\DoxyCodeLine{00047             \mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{throwFatalError}}\mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{(}}\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15}{BAREError}}\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15a66dc4c888c801d815b8f5f1f1038393c}{::}}\mbox{\hyperlink{namespace_b_a_r_e2_d_a598d6ee5637b8d61de038646a6674f15a66dc4c888c801d815b8f5f1f1038393c}{CACHE\_FAILURE}}\mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{,}} \textcolor{stringliteral}{"Item was created twice."}\mbox{\hyperlink{namespace_b_a_r_e2_d_aed4332e42208fed2905a8b0845dad4d1}{)}};}
\DoxyCodeLine{00048             \textcolor{keywordflow}{return} \textcolor{keywordtype}{nullptr};}
\DoxyCodeLine{00049         \}}
\DoxyCodeLine{00050 }
\DoxyCodeLine{00051         \textcolor{comment}{// Now we know the object doesn't exist, so we need to create one!}}
\DoxyCodeLine{00052         object = creationFunc();}
\DoxyCodeLine{00053 }
\DoxyCodeLine{00054         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.insert(std::make\_pair(key, object));}
\DoxyCodeLine{00055 }
\DoxyCodeLine{00056         \textcolor{keywordflow}{return} object;}
\DoxyCodeLine{00057     \}}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059     \textcolor{keyword}{template}<\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00060}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a236da756530af9b46a3000637c5c5f53}{00060}}     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a236da756530af9b46a3000637c5c5f53}{clear}}()}
\DoxyCodeLine{00061     \{}
\DoxyCodeLine{00062         \textcolor{comment}{// Deletes all in m\_data, then clears m\_data.}}
\DoxyCodeLine{00063         \textcolor{comment}{// Delete em all}}
\DoxyCodeLine{00064         \textcolor{keywordflow}{for}(std::pair<S, T*> i : \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}) \{}
\DoxyCodeLine{00065             \textcolor{keyword}{delete} i.second;}
\DoxyCodeLine{00066         \}}
\DoxyCodeLine{00067 }
\DoxyCodeLine{00068         \textcolor{comment}{// Clear it all}}
\DoxyCodeLine{00069         \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.clear();}
\DoxyCodeLine{00070     \}}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072     \textcolor{keyword}{template}<\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00073}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a10e71ebcdf2c43daa1c2d3a6e576d465}{00073}}     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a10e71ebcdf2c43daa1c2d3a6e576d465}{getCount}}()}
\DoxyCodeLine{00074     \{}
\DoxyCodeLine{00075         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.size();}
\DoxyCodeLine{00076     \}}
\DoxyCodeLine{00077 }
\DoxyCodeLine{00078     \textcolor{keyword}{template}<\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00079}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a3964d9554d08b43fe0cc6a72571d36d5}{00079}}     \textcolor{keyword}{typename} std::unordered\_map<S, T*>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a3964d9554d08b43fe0cc6a72571d36d5}{iterator}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a3964d9554d08b43fe0cc6a72571d36d5}{begin}}()}
\DoxyCodeLine{00080     \{}
\DoxyCodeLine{00081         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.begin();}
\DoxyCodeLine{00082     \}}
\DoxyCodeLine{00083 }
\DoxyCodeLine{00084     \textcolor{keyword}{template}<\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00085}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a7d49e3b2cd0df86958d4355f3aa907e0}{00085}}     \textcolor{keyword}{typename} std::unordered\_map<S, T*>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a7d49e3b2cd0df86958d4355f3aa907e0}{iterator}} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_a7d49e3b2cd0df86958d4355f3aa907e0}{end}}()}
\DoxyCodeLine{00086     \{}
\DoxyCodeLine{00087         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}}.end();}
\DoxyCodeLine{00088     \}}
\DoxyCodeLine{00089 }
\DoxyCodeLine{00090     \textcolor{keyword}{template}<\textcolor{keyword}{typename} S, \textcolor{keyword}{typename} T>}
\DoxyCodeLine{\Hypertarget{_cache__impl_8tcc_source_l00091}\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_afc93ab1bc2175106d70ead2a55c12134}{00091}}     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}<S, T>::\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_afc93ab1bc2175106d70ead2a55c12134}{operator}}!=(\mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache}{Cache}}\& other)}
\DoxyCodeLine{00092     \{}
\DoxyCodeLine{00093         \textcolor{keywordflow}{return} \mbox{\hyperlink{class_b_a_r_e2_d_1_1_cache_add3822402604d86512c684deef926102}{m\_data}} != other.m\_data;}
\DoxyCodeLine{00094     \}}
\DoxyCodeLine{00095 }
\DoxyCodeLine{00096 \}}

\end{DoxyCode}
